From 6693c10386bc61da233fc4ef9ff72c3bc1654328 Mon Sep 17 00:00:00 2001
From: Patrick Yavitz <pyavitz@xxxxx.com>
Date: Fri, 9 Feb 2024 13:29:50 -0500
Subject: [PATCH] arch: arm64: dts: allwinner: sun50i-h618-bananapi-m4-zero

Signed-off-by: Patrick Yavitz <pyavitz@xxxxx.com>
---
 arch/arm64/boot/dts/allwinner/Makefile                 |  2 +-
 ...api-m4zero.dts => sun50i-h618-bananapi-m4-zero.dts} | 10 ++++++----
 2 files changed, 7 insertions(+), 5 deletions(-)
 rename arch/arm64/boot/dts/allwinner/{sun50i-h618-bananapi-m4zero.dts => sun50i-h618-bananapi-m4-zero.dts} (96%)

diff --git a/arch/arm64/boot/dts/allwinner/Makefile b/arch/arm64/boot/dts/allwinner/Makefile
index 9ca0e352fc..33238b5eee 100644
--- a/arch/arm64/boot/dts/allwinner/Makefile
+++ b/arch/arm64/boot/dts/allwinner/Makefile
@@ -1,6 +1,6 @@
 # SPDX-License-Identifier: GPL-2.0
 dtb-$(CONFIG_ARCH_SUNXI) += sun50i-h618-bananapi-m4berry.dtb
-dtb-$(CONFIG_ARCH_SUNXI) += sun50i-h618-bananapi-m4zero.dtb
+dtb-$(CONFIG_ARCH_SUNXI) += sun50i-h618-bananapi-m4-zero.dtb
 dtb-$(CONFIG_ARCH_SUNXI) += sun50i-h616-orangepi-zero2.dtb
 dtb-$(CONFIG_ARCH_SUNXI) += sun50i-h616-orangepi-zero3.dtb
 dtb-$(CONFIG_ARCH_SUNXI) += sun50i-h616-orangepi-zero2w.dtb
diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h618-bananapi-m4zero.dts b/arch/arm64/boot/dts/allwinner/sun50i-h618-bananapi-m4-zero.dts
similarity index 96%
rename from arch/arm64/boot/dts/allwinner/sun50i-h618-bananapi-m4zero.dts
rename to arch/arm64/boot/dts/allwinner/sun50i-h618-bananapi-m4-zero.dts
index a22436fd69..b182ba7d9b 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h618-bananapi-m4zero.dts
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h618-bananapi-m4-zero.dts
@@ -14,7 +14,7 @@
 
 / {
 	model = "BananaPi M4 Zero";
-	compatible = "BiPai,bananapi-m4zero", "allwinner,sun50i-h616";
+	compatible = "sinovoip,bpi-m4-zero", "allwinner,sun50i-h616", "allwinner,sun50i-h618";
 
 	aliases {
 		ethernet0 = &emac1;
@@ -37,11 +37,12 @@ hdmi_con_in: endpoint {
 		};
 	};
 
-	leds: leds {
+	leds {
 		compatible = "gpio-leds";
 
-		led-greed {
-			label = "red_led";
+		led-red {
+			color = <LED_COLOR_ID_RED>;
+			function = LED_FUNCTION_STATUS;
 			gpios = <&pio 2 12 GPIO_ACTIVE_HIGH>; /* PC12 */
 			linux,default-trigger = "heartbeat";
 		};
@@ -116,6 +117,7 @@ &mmc2 {
 	bus-width = <8>;
 	non-removable;
 	cap-mmc-hw-reset;
+	//mmc-hs200-1_8v;
 	status = "okay";
 };
 
-- 
2.39.2

